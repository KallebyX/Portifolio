{% extends 'base.html' %}
{% block content %}
<section class="container py-5 mt-5 bg-light rounded-4 shadow-sm">
  <h2 class="fw-bold mb-4">Editar Projeto</h2>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-success mt-3" role="alert">
        {{ messages[0] }}
      </div>
    {% endif %}
  {% endwith %}

  <form action="/admin/editar/{{ projeto.id }}" method="POST" enctype="multipart/form-data" class="card p-4 border-0 shadow">
    <div class="row g-3">
      <div class="col-md-6">
        <label for="nome" class="form-label">Nome do Projeto</label>
        <input type="text" class="form-control" id="nome" name="nome" value="{{ projeto.nome }}" required>
      </div>
      <div class="col-md-6">
        <label for="categoria" class="form-label">Categoria</label>
        <input type="text" class="form-control" id="categoria" name="categoria" value="{{ projeto.categoria }}">
      </div>
      <div class="col-md-6">
        <label for="stack" class="form-label">Tecnologias Usadas (stack)</label>
        <input type="text" class="form-control" id="stack" name="stack" value="{{ projeto.stack }}">
      </div>
      <div class="col-md-6">
        <label for="link" class="form-label">Link do Projeto</label>
        <input type="url" class="form-control" id="link" name="link" value="{{ projeto.link }}">
      </div>
      <div class="col-md-6">
        <label for="site" class="form-label">Link do Site (se aplicável)</label>
        <input type="url" class="form-control" id="site" name="site" value="{{ projeto.site }}">
      </div>
      <div class="col-md-12">
        <label for="imagem" class="form-label">Imagem do Projeto</label>
        <div class="mb-3">
          <img src="{{ projeto.imagem }}" class="card-img-top project-img mb-2" alt="Preview da imagem {{ projeto.nome }}" style="max-height:200px; object-fit:cover;">
        </div>
        <input class="form-control" type="file" id="imagem" name="imagem" accept="image/*">
        <small class="form-text text-muted">Envie uma nova imagem para atualizar o projeto.</small>
      </div>
      <div class="col-md-12">s3_upload.py
        <label for="descricao" class="form-label">Descrição</label>
        <textarea class="form-control" id="descricao" name="descricao" rows="4">{{ projeto.descricao }}</textarea>
      </div>
    </div>
    <div class="text-end mt-4">
      <a href="/admin" class="btn btn-secondary">Cancelar</a>
      <button type="submit" class="btn btn-primary">Salvar Alterações</button>
    </div>
  </form>
</section>
{% endblock %}